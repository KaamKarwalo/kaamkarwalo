

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>KaamKarwalo - Skilled Worker Hiring in Hajipur</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/KaamKarwalo/logo/main/logo_1_bgremove.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    @keyframes scroll-left {
      0% { transform: translateX(0%); }
      100% { transform: translateX(-100%); }
    }
    .ticker-content {
      animation: scroll-left 15s linear infinite;
    }
  </style>
</head>
<body class="bg-gray-100 font-sans">
  <!-- Header -->
  <header class="bg-gray-800 text-white py-4">
    <div class="container mx-auto flex justify-between items-center px-4">
      <div id="logoClick" class="flex items-center space-x-3 cursor-pointer">
      <img src="https://raw.githubusercontent.com/KaamKarwalo/logo/main/logo_1_bgremove.png" class="h-10" alt="KaamKarwalo Logo">
      <h1 class="text-2xl font-bold"><span class="text-blue-400">Kaam</span><span class="text-yellow-400">Karwalo</span></h1>
      </div>

      <nav id="navMenu" class="hidden flex-col md:flex md:flex-row space-y-3 md:space-y-0 md:space-x-6 absolute md:static top-16 left-0 w-full md:w-auto bg-gray-800 md:bg-transparent p-4 md:p-0 z-50">

        <button id="loginBtn" class="bg-blue-600 hover:bg-blue-700 px-4 py-1 rounded">Login</button>
        <button id="registerBtn" class="bg-gray-600 hover:bg-gray-700 px-4 py-1 rounded">Register</button>
        <button id="logoutBtn" class="bg-red-600 hover:bg-red-700 px-4 py-1 rounded hidden">Logout</button>
      </nav>
      <button id="menuToggle" class="md:hidden text-white"><i class="fas fa-bars"></i></button>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="bg-cover bg-center h-[60vh] flex items-center justify-center text-white text-center" style="background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://i.ibb.co/yJQnHkK/labour6.jpg')">
    <div>
      <h1 class="text-4xl md:text-5xl font-bold mb-4">Hire Skilled Workers in Hajipur</h1>
      <p class="text-lg mb-6">Mistri, Mazdoor, Painter, Plumber aur Electrician ek click mein</p>
      <button onclick="document.getElementById('registerModal').classList.remove('hidden')" class="bg-yellow-500 text-black px-6 py-2 rounded hover:bg-yellow-600">Start Hiring</button>
    </div>
  </section>

  <!-- Marquee Banner -->
  <div class="bg-orange-600 text-white py-2 overflow-hidden whitespace-nowrap">
    <div class="ticker-content inline-block px-8 text-xl">
      üöß ‡§π‡§æ‡§ú‡•Ä‡§™‡•Å‡§∞ ‡§Æ‡•á‡§Ç ‡§Æ‡§ø‡§∏‡•ç‡§§‡•ç‡§∞‡•Ä ‡§Ø‡§æ ‡§Æ‡§ú‡§º‡§¶‡•Ç‡§∞ ‡§ö‡§æ‡§π‡§ø‡§è? ‡§Ö‡§¨ ‡§¨‡§∏ ‡§è‡§ï ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§Æ‡•á‡§Ç! ‚Äì KaamKarwalo ‡§™‡§∞ ‡§Æ‡§ø‡§≤‡•á‡§Ç ‡§™‡•ç‡§∞‡•ã‡§´‡•á‡§∂‡§®‡§≤‡•ç‡§∏! üöß ‡§Æ‡§ú‡§º‡§¶‡•Ç‡§∞ ‡§∏‡•á ‡§Æ‡§ø‡§∏‡•ç‡§§‡•ç‡§∞‡•Ä ‡§§‡§ï, ‡§π‡§∞ ‡§ï‡§æ‡§Æ ‡§ï‡§æ ‡§π‡§≤!
    </div>
  </div>

  <!-- Services Grid -->
  <section id="services" class="py-12 bg-white">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">Our Services</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="bg-white shadow p-6 rounded hover:shadow-lg">
          <i class="fas fa-hammer text-4xl text-indigo-500"></i>
          <h3 class="text-xl mt-4 font-bold">Mistri (Mason)</h3>
          <p class="text-gray-600">Skilled building professionals for construction & repair work</p>
        </div>
        <div class="bg-white shadow p-6 rounded hover:shadow-lg">
          <i class="fas fa-hard-hat text-4xl text-orange-500"></i>
          <h3 class="text-xl mt-4 font-bold">Labour</h3>
          <p class="text-gray-600">Strong and reliable labor for general site work</p>
        </div>
        <div class="bg-white shadow p-6 rounded hover:shadow-lg">
          <i class="fas fa-paint-roller text-4xl text-purple-500"></i>
          <h3 class="text-xl mt-4 font-bold">Painter</h3>
          <p class="text-gray-600">Beautify your space with professional painting services</p>
        </div>
        <div class="bg-white shadow p-6 rounded hover:shadow-lg">
          <i class="fas fa-bolt text-4xl text-yellow-500"></i>
          <h3 class="text-xl mt-4 font-bold">Electrician</h3>
          <p class="text-gray-600">Certified electricians for wiring, repair and installations</p>
        </div>
        <div class="bg-white shadow p-6 rounded hover:shadow-lg">
          <i class="fas fa-tools text-4xl text-blue-500"></i>
          <h3 class="text-xl mt-4 font-bold">Plumber</h3>
          <p class="text-gray-600">Leak repairs, pipelines and plumbing installations</p>
        </div>
        <div class="bg-white shadow p-6 rounded hover:shadow-lg">
          <i class="fas fa-saw text-4xl text-green-500"></i>
          <h3 class="text-xl mt-4 font-bold">Carpenter</h3>
          <p class="text-gray-600">All kinds of woodwork, furniture, and fittings</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Testimonials -->
  <section id="testimonials" class="bg-gray-100 py-12">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-3xl font-bold mb-8">Customer Testimonials</h2>
      <div class="grid md:grid-cols-3 gap-6">
        <div class="bg-white p-6 rounded shadow">
          <p class="text-gray-600 mb-4">"Bahut hi achha kaam hua. Painter samay par aaya aur kaam khubsoorti se kiya."</p>
          <h4 class="font-semibold">Anita Devi</h4>
        </div>
        <div class="bg-white p-6 rounded shadow">
          <p class="text-gray-600 mb-4">"Phone number bina share kiye kaam ho gaya. Privacy ka dhyan rakhna achha laga."</p>
          <h4 class="font-semibold">Rahul Kumar</h4>
        </div>
        <div class="bg-white p-6 rounded shadow">
          <p class="text-gray-600 mb-4">"Carpenter 1 ghante me pohch gaya. Furniture ka kaam perfect tha."</p>
          <h4 class="font-semibold">Poonam Singh</h4>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-900 text-gray-300">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <img src="https://raw.githubusercontent.com/KaamKarwalo/logo/main/logo_1_bgremove.png" class="h-10" alt="KaamKarwalo Logo">
          <h1 class="text-2xl font-bold"><span class="text-blue-400">Kaam</span><span class="text-yellow-400">Karwalo</span></h1>
          <p class="mt-4">Connecting skilled laborers with those who need their services quickly and securely.</p>
        </div>
        <div>
          <h3 class="text-white text-lg font-semibold mb-4">Company</h3>
          <ul class="space-y-2">
            <li><a href="#" class="hover:text-white">About Us</a></li>
            <li><a href="#" class="hover:text-white">Careers</a></li>
            <li><a href="#" class="hover:text-white">Press</a></li>
            <li><a href="#" class="hover:text-white">Blog</a></li>
          </ul>
        </div>
        <div>
          <h3 class="text-white text-lg font-semibold mb-4">Support</h3>
          <ul class="space-y-2">
            <li><a href="#" class="hover:text-white">Help Center</a></li>
            <li><a href="#" class="hover:text-white">Safety</a></li>
            <li><a href="#" class="hover:text-white">Community Guidelines</a></li>
            <li><a href="#" class="hover:text-white">Contact Us</a></li>
          </ul>
        </div>
        <div>
          <h3 class="text-white text-lg font-semibold mb-4">Legal</h3>
          <ul class="space-y-2">
            <li><a href="#" class="hover:text-white">Privacy Policy</a></li>
            <li><a href="#" class="hover:text-white">Terms of Service</a></li>
            <li><a href="#" class="hover:text-white">Cookie Policy</a></li>
          </ul>
        </div>
      </div>
      <div class="mt-8 pt-8 border-t border-gray-800 text-center">
        <p>Copyright ¬© 2025 kaamkarwalo.in - All Rights Reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Login Modal -->
  <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden justify-center items-center z-50">
    <div class="bg-white p-6 rounded shadow-md w-96 relative">
      <button class="absolute top-2 right-2 text-gray-500 hover:text-black" onclick="$('#loginModal').addClass('hidden')"><i class="fas fa-times"></i></button>
      <h2 class="text-xl font-semibold mb-4">Login</h2>
      <input type="text" placeholder="Phone" class="w-full border px-3 py-2 mb-3 rounded" />
      <input type="password" placeholder="Password" class="w-full border px-3 py-2 mb-3 rounded" />
      <button class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700">Login</button>
    </div>
  </div>

  <!-- Register Modal -->
  <div id="registerModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex justify-center items-center z-50">
    <div class="bg-white p-6 rounded shadow-md w-96 relative">
      <button class="absolute top-2 right-2 text-gray-500 hover:text-black" onclick="$('#registerModal').addClass('hidden')"><i class="fas fa-times"></i></button>
      <h2 class="text-xl font-semibold mb-4">Register</h2>

      <select id="userRole" class="w-full border px-3 py-2 mb-3 rounded">
        <option value="">Select Role</option>
        <option value="customer">Customer</option>
        <option value="worker">Worker</option>
      </select>

      <input type="text" placeholder="User ID" id="uniqueId" class="w-full border px-3 py-2 mb-3 rounded bg-gray-100 text-gray-500" readonly />
      <input type="text" id="regName" placeholder="Name *" class="w-full border px-3 py-2 mb-3 rounded" required />
      <input type="email" placeholder="Email (Optional)" class="w-full border px-3 py-2 mb-3 rounded" />
      <input type="tel" id="regPhone" placeholder="Mobile Number *" class="w-full border px-3 py-2 mb-3 rounded" required />

      <select id="workerType" class="w-full border px-3 py-2 mb-3 rounded hidden">
        <option value="">Select Worker Type</option>
        <option value="labour">Labour</option>
        <option value="mistri">Mistri</option>
        <option value="carpenter">Carpenter</option>
        <option value="painter">Painter</option>
        <option value="builder">Builder</option>
        <option value="plumber">Plumber</option>
        <option value="electrician">Electrician</option>
      </select>

      <input type="text" id="regAddress" placeholder="Full Address" class="w-full border px-3 py-2 mb-3 rounded" />
      <input type="text" id="regState" placeholder="State *" class="w-full border px-3 py-2 mb-3 rounded" />
      <input type="text" id="regCity" placeholder="City *" class="w-full border px-3 py-2 mb-3 rounded" />
      <input type="text" id="regDistrict" placeholder="District *" class="w-full border px-3 py-2 mb-3 rounded" />
      <input type="text" id="regLocation" placeholder="Google Map Link (Optional)" class="w-full border px-3 py-2 mb-3 rounded" />
      <button type="button" onclick="getCurrentLocation()" class="bg-blue-500 text-white py-1 px-3 rounded mb-3 hover:bg-blue-600 text-sm">Use Current Location</button>

      <input type="password" placeholder="Password" class="w-full border px-3 py-2 mb-3 rounded" />
      <button id="submitRegister" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Register</button>
    </div>
  </div>

  <script>
  async function getCurrentLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        async (position) => {
          const lat = position.coords.latitude;
          const lng = position.coords.longitude;
          const googleLink = `https://www.google.com/maps?q=${lat},${lng}`;

          // fill the input
          document.getElementById("regLocation").value = googleLink;

          alert("üìç Location captured successfully!");
        },
        (error) => {
          console.error(error);
          alert("‚ùå Unable to fetch location. Please allow GPS access.");
        }
      );
    } else {
      alert("‚ùå Geolocation is not supported in this browser.");
    }
  }
</script>


<script>
  function generateUniqueId() {
    return 'UID-' + Math.random().toString(36).substring(2, 10).toUpperCase();
  }

  async function registerUser() {
    const userId = $('#uniqueId').val().trim();
    const role = $('#userRole').val().trim();
    const name = $('#regName').val().trim();
    const email = $('input[type="email"]').val().trim();
    const phone = $('#regPhone').val().trim();
    const password = $('#registerModal input[type="password"]').val().trim();
    const workerType = role === 'worker' ? $('#workerType').val().trim() : '';
    const city = $('#regCity').val().trim();
    const district = $('#regDistrict').val().trim();
    const state = $('#regState').val().trim();
    const address = $('#regAddress').val().trim();
    const location = $('#regLocation').val().trim();

    if (!userId || !role || !name || !phone || !password || !city || !district || !state) {
      alert('Please fill all required fields');
      return;
    }
    if (role === 'worker' && !workerType) {
      alert('Please select a worker type');
      return;
    }

    const data = { userId, role, name, email, phone, password, workerType, city, district, state, address, location };

    try {
      const res = await fetch('https://kaamkarwalo-backend.onrender.com/api/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      const result = await res.json();
      if (res.ok) {
        alert(result.message || 'Registered!');
        $('#registerModal').addClass('hidden');
        $('#registerModal input').val('');
      } else {
        alert(result.error || 'Registration failed.');
      }
    } catch (err) {
      alert('Server error');
    }
  }

  // async function loginUser() {
  //   const phone = $('#loginModal input[type="text"]').val();
  //   const password = $('#loginModal input[type="password"]').val();

  //   if (!phone || !password) {
  //     alert('Enter phone and password');
  //     return;
  //   }

  //   try {
  //     const res = await fetch('https://kaamkarwalo-backend.onrender.com/api/login', {
  //       method: 'POST',
  //       headers: { 'Content-Type': 'application/json' },
  //       body: JSON.stringify({ phone, password })
  //     });

  //     const result = await res.json();
  //     if (res.ok) {
  //       const user = result.user;
  //       if (user.role === "admin") {
  //         localStorage.setItem("admin", JSON.stringify(user));
  //         window.location.href = "admin.html";
  //       } else if (user.role === "customer") {
  //         localStorage.setItem("customer", JSON.stringify(user));
  //         window.location.href = "customer-home.html";
  //       } else if (user.role === "worker") {
  //         localStorage.setItem("worker", JSON.stringify(user));
  //         window.location.href = "worker-page.html";
  //       }
  //     } else {
  //       alert(result.error || 'Login failed');
  //     }
  //   } catch (err) {
  //     alert('Server error');
  //   }
  // }

  async function loginUser() {
  const phone = $('#loginModal input[type="text"]').val();
  const password = $('#loginModal input[type="password"]').val();

  if (!phone || !password) {
    alert('Enter phone and password');
    return;
  }

  // Show spinner
  $('#loadingOverlay').removeClass('hidden');

  try {
    const res = await fetch('https://kaamkarwalo-backend.onrender.com/api/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ phone, password })
    });

    const result = await res.json();
    if (res.ok) {
      const user = result.user;
      if (user.role === "admin") {
        localStorage.setItem("admin", JSON.stringify(user));
        window.location.href = "admin.html";
      } else if (user.role === "customer") {
        localStorage.setItem("customer", JSON.stringify(user));
        window.location.href = "customer-home.html";
      } else if (user.role === "worker") {
        localStorage.setItem("worker", JSON.stringify(user));
        window.location.href = "worker-page.html";
      }
    } else {
      alert(result.error || 'Login failed');
    }
  } catch (err) {
    alert('Server error');
  } finally {
    // Hide spinner (always run)
    $('#loadingOverlay').addClass('hidden');
  }
}


  // Mobile menu toggle
  document.getElementById("menuToggle").addEventListener("click", () => {
    document.getElementById("navMenu").classList.toggle("hidden");
  });

  $(document).ready(function () {
    const loginBtn = $('#loginBtn');
    const registerBtn = $('#registerBtn');
    const logoutBtn = $('#logoutBtn');

    // Role-based display
    if (localStorage.getItem('admin')) {
      loginBtn.text('Go to Admin Panel').off('click').on('click', () => {
        window.location.href = 'admin.html';
      });
      registerBtn.hide();
      logoutBtn.show();
    } 
    else if (localStorage.getItem('customer')) {
      loginBtn.text('Go to Customer Page').off('click').on('click', () => {
        window.location.href = 'customer-home.html';
      });
      registerBtn.hide();
      logoutBtn.show();
    } 
    else if (localStorage.getItem('worker')) {
      loginBtn.text('Go to Worker Page').off('click').on('click', () => {
        window.location.href = 'worker-page.html';
      });
      registerBtn.hide();
      logoutBtn.show();
    } 
    else {
      loginBtn.text('Login').off('click').on('click', () => {
        $('#loginModal').removeClass('hidden').addClass('flex');
      });
      registerBtn.show().off('click').on('click', () => {
        $('#registerModal').removeClass('hidden').addClass('flex');
      });
      logoutBtn.hide();
    }

    // Logout function
    logoutBtn.off('click').on('click', () => {
      localStorage.clear();
      window.location.href = 'index.html';
    });

    // Logo click ‚Üí redirect based on role
    $('#logoClick').on('click', () => {
      if (localStorage.getItem('admin')) {
        window.location.href = 'admin.html';
      } else if (localStorage.getItem('customer')) {
        window.location.href = 'customer-home.html';
      } else if (localStorage.getItem('worker')) {
        window.location.href = 'worker-page.html';
      } else {
        window.location.href = 'index.html';
      }
    });

    $('#userRole').change(function () {
      const role = $(this).val();
      $('#uniqueId').val(generateUniqueId());
      if (role === 'worker') {
        $('#workerType').removeClass('hidden');
      } else {
        $('#workerType').addClass('hidden');
      }
    });

    $('#submitRegister').click(registerUser);
    $('#loginModal button.w-full').click(loginUser);
  });
</script>

<!-- Loading Spinner -->
<div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-50 hidden flex justify-center items-center z-50">
  <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-yellow-400"></div>
</div>
<!-- Welcome Video Modal -->
<div id="welcomeVideoModal" class="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50">
  <div class="relative w-[90%] max-w-3xl rounded-lg shadow-lg overflow-hidden">
    
    <!-- Close Button (Bigger & Clearer) -->
    <button onclick="closeWelcomeVideo()" 
      class="absolute -top-6 -right-6 w-16 h-16 flex items-center justify-center 
             bg-red-600 hover:bg-red-700 text-white text-4xl font-extrabold rounded-full 
             shadow-2xl z-50">
      &times;
    </button>

    <!-- YouTube Video -->
    <div style="position:relative; padding-bottom:56.25%; height:0;">
      <iframe id="welcomeVideoFrame"
        src="https://www.youtube.com/embed/3zKDAZm1d6c?autoplay=1&mute=1&loop=1&playlist=3zKDAZm1d6c&controls=0&iv_load_policy=3&modestbranding=1&rel=0&fs=0&disablekb=1"
        style="position:absolute; top:0; left:0; width:100%; height:100%;"
        frameborder="0"
        allow="autoplay; encrypted-media">
      </iframe>
    </div>
  </div>
</div>

<script>
  function closeWelcomeVideo() {
    const modal = document.getElementById("welcomeVideoModal");
    const iframe = document.getElementById("welcomeVideoFrame");
    modal.style.display = "none";
    if (iframe) iframe.src = ""; // stop playback if iframe
    const video = document.getElementById("welcomeVideo");
    if (video) video.pause(); // stop playback if HTML5 <video>
  }

  window.onload = function() {
    document.getElementById("welcomeVideoModal").style.display = "flex";
  }
</script>


</body>
</html>
